<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Reproducing Computation Environment | Reproducibility in Bioinformatics</title>
  <meta name="description" content="Chapter 2 Reproducing Computation Environment | Reproducibility in Bioinformatics" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Reproducing Computation Environment | Reproducibility in Bioinformatics" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Reproducing Computation Environment | Reproducibility in Bioinformatics" />
  
  
  

<meta name="author" content="Sangram Keshari Sahu" />


<meta name="date" content="2020-10-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="reproducing-a-workflowpipeline.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="reproducing-computation-environment.html"><a href="reproducing-computation-environment.html"><i class="fa fa-check"></i><b>2</b> Reproducing Computation Environment</a><ul>
<li class="chapter" data-level="2.1" data-path="reproducing-computation-environment.html"><a href="reproducing-computation-environment.html#a-basic-conda-guide"><i class="fa fa-check"></i><b>2.1</b> A basic conda guide</a><ul>
<li class="chapter" data-level="2.1.1" data-path="reproducing-computation-environment.html"><a href="reproducing-computation-environment.html#use-case"><i class="fa fa-check"></i><b>2.1.1</b> Use case</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="reproducing-computation-environment.html"><a href="reproducing-computation-environment.html#a-basic-docker-guide"><i class="fa fa-check"></i><b>2.2</b> A basic docker guide</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="reproducing-a-workflowpipeline.html"><a href="reproducing-a-workflowpipeline.html"><i class="fa fa-check"></i><b>3</b> Reproducing a Workflow/Pipeline</a><ul>
<li class="chapter" data-level="3.1" data-path="reproducing-a-workflowpipeline.html"><a href="reproducing-a-workflowpipeline.html#a-basic-nextflow-guide"><i class="fa fa-check"></i><b>3.1</b> A basic Nextflow guide</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reproducibility in Bioinformatics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="reproducing-computation-environment" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Reproducing Computation Environment</h1>
<blockquote>
<p>What is a Computation Environments?</p>
<p>Computation Environments is an interface from where a tools/command can be called if it is installed in that environment.</p>
<p>Example:</p>
<p>Whenever you open a bash terminal there are certain tools/commands available to you for use. Those are most probably present in your <code>.bashrc</code> or a path is exported.</p>
</blockquote>
<p>If you using lots of different bioinformatics tools at some point of time must have downloaded a tool, complied (if not already in binary) and then exported path.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="reproducing-computation-environment.html#cb1-1"></a><span class="bu">export</span> <span class="va">PATH=</span><span class="st">&quot;tool-path:</span><span class="va">$PATH</span><span class="st">&quot;</span></span></code></pre></div>
<p>Or if you are lucky, then downloaded using some system package manager, which automatically exports the path for you.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="reproducing-computation-environment.html#cb2-1"></a><span class="ex">apt-get</span> install fastqc</span></code></pre></div>
<p>Basically you have told the computer to make available the tool in you <strong>current environment</strong>. So that you can just call the tool name instead of giving the whole path every time.</p>
<p>But maintaining <strong>this environments</strong> becomes very difficult when you working with lots of tools or in a shared computer(HPC) and Cloud.</p>
<p>And what if tomorrow if you wants to change your system or you tell you collaborator to run the whole thing what you have run. Then in both the case all the tools need to be installed again from scratch.</p>
<p>In that case following tools/platforms comes handy</p>
<ul>
<li><a href="reproducing-computation-environment.html#a-basic-conda-guide">Conda</a> - An open-source package manager and environment management system.</li>
<li><a href="reproducing-computation-environment.html#a-basic-docker-guide">Docker</a> - A light weight platform which helps create portable virtual environment.</li>
</ul>
<div id="a-basic-conda-guide" class="section level2">
<h2><span class="header-section-number">2.1</span> A basic conda guide</h2>
<p>Conda is a package manager and environment management system. That means you can install any tool using this and at the same time you can use this to manager those tools in different environments.</p>
<p>Tools/Packages in conda are distributed in different channels. <a href="https://docs.conda.io/projects/conda/en/latest/user-guide/concepts/channels.html">Read more about conda channels here</a></p>
<div id="use-case" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Use case</h3>
<p>Lets say a Sam is a researcher, who recently sequenced some data and received FASTQ files. He want to do quality check of those data in a reproducible, so that if a college of his try to reproduce the results he can easily do so.</p>
<p>fastqc tool is going to be used here. Let install that using conda.</p>
<p>A simple google of <code>fastqc conda</code> will land you at <a href="https://anaconda.org/bioconda/fastqc">this fastqc conda home page</a></p>
<p>Or from command line -</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="reproducing-computation-environment.html#cb3-1"></a><span class="ex">conda</span> search fastqc -c bioconda</span>
<span id="cb3-2"><a href="reproducing-computation-environment.html#cb3-2"></a></span>
<span id="cb3-3"><a href="reproducing-computation-environment.html#cb3-3"></a><span class="ex">Loading</span> channels: done</span>
<span id="cb3-4"><a href="reproducing-computation-environment.html#cb3-4"></a><span class="co"># Name                       Version           Build  Channel             </span></span>
<span id="cb3-5"><a href="reproducing-computation-environment.html#cb3-5"></a><span class="ex">fastqc</span>                        0.10.1               0  bioconda            </span>
<span id="cb3-6"><a href="reproducing-computation-environment.html#cb3-6"></a><span class="ex">fastqc</span>                        0.10.1               1  bioconda            </span>
<span id="cb3-7"><a href="reproducing-computation-environment.html#cb3-7"></a><span class="ex">fastqc</span>                        0.11.2      pl5.22.0_0  bioconda            </span>
<span id="cb3-8"><a href="reproducing-computation-environment.html#cb3-8"></a><span class="ex">fastqc</span>                        0.11.3               0  bioconda            </span>
<span id="cb3-9"><a href="reproducing-computation-environment.html#cb3-9"></a><span class="ex">fastqc</span>                        0.11.3               1  bioconda            </span>
<span id="cb3-10"><a href="reproducing-computation-environment.html#cb3-10"></a><span class="ex">fastqc</span>                        0.11.7               5  bioconda            </span>
<span id="cb3-11"><a href="reproducing-computation-environment.html#cb3-11"></a><span class="ex">fastqc</span>                        0.11.7               6  bioconda            </span>
<span id="cb3-12"><a href="reproducing-computation-environment.html#cb3-12"></a><span class="ex">fastqc</span>                        0.11.7      pl5.22.0_0  bioconda            </span>
<span id="cb3-13"><a href="reproducing-computation-environment.html#cb3-13"></a><span class="ex">fastqc</span>                        0.11.7      pl5.22.0_2  bioconda            </span>
<span id="cb3-14"><a href="reproducing-computation-environment.html#cb3-14"></a><span class="ex">fastqc</span>                        0.11.8               2  bioconda            </span>
<span id="cb3-15"><a href="reproducing-computation-environment.html#cb3-15"></a><span class="ex">fastqc</span>                        0.11.9               0  bioconda    </span></code></pre></div>
<blockquote>
<p>Most of the tools used by Bioinformatics applications are available in <strong>bioconda</strong> channel. So If you looking for a tool just google it followed by bioconda, and in most cases the first or second link will take to its conda home page. There you will get information about how to install it. Also, you can search for the tool from command line as well.</p>
</blockquote>
<p>Here, the output shows different version. If you want you can mention a particular version while installing (such as <code>fastqc=0.11.9</code>) otherwise conda itself choice a particular latest version based on suitable dependency.</p>
<p>lets install fastp in an isolated conda environment <code>qc</code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="reproducing-computation-environment.html#cb4-1"></a><span class="ex">conda</span> install fastqc -c bioconda -n qc</span></code></pre></div>
<p>This may take few minutes depending upon the number of dependency</p>
<blockquote>
<p>Why isolated enviroment is required?
Because this makes sure clash of dependency for the tools doesn’t happen.</p>
</blockquote>
<p>To use this newly created environment, we need to enter into it</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="reproducing-computation-environment.html#cb5-1"></a><span class="ex">conda</span> activate qc</span></code></pre></div>
<p>Here we can normally use the tools/commands.</p>
<p>Now Sam can share this complete environment to his college by just generating a yml file.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="reproducing-computation-environment.html#cb6-1"></a><span class="ex">conda</span> env export <span class="op">&gt;</span> qc.yml</span></code></pre></div>
<p>Read about <a href="https://the-turing-way.netlify.app/reproducible-research/renv/renv-package.html">conda in reproducible-research</a></p>
</div>
</div>
<div id="a-basic-docker-guide" class="section level2">
<h2><span class="header-section-number">2.2</span> A basic docker guide</h2>
<p>Docker is a tool which helps you create light weight <strong>containers</strong>, which are portable.</p>
<p>You can think a container as a Computer system where all you tools are installed and ready to use.</p>
<p>The logic to make a container can be write in a <strong>Dockerfile</strong></p>
<p>An example Dockerfile</p>
<pre class="docker"><code>FROM ubuntu:19.10

RUN apt-get update
RUN apt-get install -y fastqc </code></pre>
<p>Built the docker image</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="reproducing-computation-environment.html#cb8-1"></a><span class="bu">cd</span> docker</span>
<span id="cb8-2"><a href="reproducing-computation-environment.html#cb8-2"></a><span class="ex">docker</span> build -t fastqc:latest .</span></code></pre></div>
<p>Run the docker container</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="reproducing-computation-environment.html#cb9-1"></a><span class="ex">docker</span> run --rm fastqc:latest fastqc --help</span></code></pre></div>
<p>You should see the <code>fastqc</code> help menu</p>
<p>Read about <a href="https://the-turing-way.netlify.app/reproducible-research/renv/renv-containers.html">docker in reproducible-research</a></p>
<p>TODO: advance - alphin images, docker-compose</p>
<p>TODO: packrat/renv</p>
<p>Read more about Reproducible environments in <a href="https://the-turing-way.netlify.app/reproducible-research/renv.html">The Turing Way Project</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="reproducing-a-workflowpipeline.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
